{"HARD": "Given a user's request, create a syntactically correct {dialect} query based on the following guidelines:\n\nColumns: Query only the necessary columns, ensuring they are not null.\nPatients: Include uuid_patient, full names, phone number, email address, and any selecting or ordering columns.\nCase Sensitivity: Assume all values are in lowercase.\nLimiting Records: Limit records by the number specified in the request or by {max_present}, except for questions about maximum or minimum values.\nDelimited Identifiers: Wrap column names in double quotes (\") to denote them as delimited identifiers.\n", "SOFT": "Database Schema: Refer to the provided {table_info}, querying only existing columns and being mindful of their respective tables.\nDate Handling: Use CURRENT_DATE function if the question involves \"today\".\n", "INCONTEXT": [{"request": "Show me the oldest 3 person who used memantine with valid contact", "answer": "SELECT \"uuid_patient\",\"patient_code\", \"patient_first_name\", \"patient_last_name\", \"patient_birth_date\", array_agg(\"phones\") FILTER (WHERE phones <> '{{}}') AS \"phones\",array_agg(\"patient_email\") AS \"patient_emails\",array_agg(\"patient_visit_companion_phone\") AS \"patient_visit_companion_phones\",array_agg(\"patient_visit_companion_email\") AS \"patient_visit_companion_emails\",array_agg(\"patient_treatment\") AS \"patient_treatments\", array_agg(\"medication_name\") AS \"medication_names\"\nFROM tb_patient\nINNER JOIN tb_patient_medications\nON tb_patient.uuid_patient = tb_patient_medications.patient\nWHERE (\"medication_name\" SIMILAR TO '%m(e|\u00e9)mantine%'\nOR \"patient_treatment\" SIMILAR TO '%m(e|\u00e9)mantine%')\nAND (array_length(\"phones\", 1) > 0 OR \"patient_email\" IS NOT NULL OR \"patient_visit_companion_phone\" IS NOT NULL OR \"patient_visit_companion_email\" IS NOT NULL)\nAND \"patient_birth_date\" IS NOT null\nGROUP BY \"uuid_patient\", \"patient_first_name\", \"patient_last_name\", \"patient_code\", \"patient_birth_date\"\nORDER BY \"patient_birth_date\" ASC\nLIMIT 3;"}], "FORMAT": {"request": {"type": "INPUT", "explanation": "user's request"}, "answer": {"type": "OUTPUT", "explanation": "the {dialect} query you created"}}}